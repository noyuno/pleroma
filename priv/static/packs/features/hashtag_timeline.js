webpackJsonp([15],{283:function(t,e,n){"use strict";function o(){return function(t,e){t(r()),Object(p.a)(e).get("/api/v1/mutes").then(function(e){var n=Object(p.b)(e).refs.find(function(t){return"next"===t.rel});t(Object(g.g)(e.data)),t(i(e.data,n?n.uri:null)),t(Object(f.y)(e.data.map(function(t){return t.id})))}).catch(function(e){return t(s(e))})}}function r(){return{type:v}}function i(t,e){return{type:m,accounts:t,next:e}}function s(t){return{type:y,error:t}}function a(){return function(t,e){var n=e().getIn(["user_lists","mutes","next"]);null!==n&&(t(c()),Object(p.a)(e).get(n).then(function(e){var n=Object(p.b)(e).refs.find(function(t){return"next"===t.rel});t(Object(g.g)(e.data)),t(u(e.data,n?n.uri:null)),t(Object(f.y)(e.data.map(function(t){return t.id})))}).catch(function(e){return t(l(e))}))}}function c(){return{type:O}}function u(t,e){return{type:I,accounts:t,next:e}}function l(t){return{type:M,error:t}}function d(t){return function(e){e({type:S,account:t}),e(Object(b.d)("MUTE"))}}function h(){return function(t){t({type:C})}}e.b=o,e.a=a,e.c=d,e.d=h;var p=n(13),f=n(22),g=n(15),b=n(26),v="MUTES_FETCH_REQUEST",m="MUTES_FETCH_SUCCESS",y="MUTES_FETCH_FAIL",O="MUTES_EXPAND_REQUEST",I="MUTES_EXPAND_SUCCESS",M="MUTES_EXPAND_FAIL",S="MUTES_INIT_MODAL",C="MUTES_TOGGLE_HIDE_NOTIFICATIONS"},285:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var o,r,i=n(2),s=n.n(i),a=n(1),c=n.n(a),u=n(3),l=n.n(u),d=n(4),h=n.n(d),p=n(0),f=n.n(p),g=n(6),b=(r=o=function(t){function e(){return c()(this,e),l()(this,t.apply(this,arguments))}return h()(e,t),e.prototype.render=function(){var t=this.props,e=t.disabled,n=t.visible;return s()("button",{className:"load-more",disabled:e||!n,style:{visibility:n?"visible":"hidden"},onClick:this.props.onClick},void 0,s()(g.b,{id:"status.load_more",defaultMessage:"Load more"}))},e}(f.a.PureComponent),o.defaultProps={visible:!0},r)},287:function(t,e,n){"use strict";function o(t,e){return function(n){n({type:p,account:t,status:e}),n(Object(h.d)("REPORT"))}}function r(t,e){return{type:v,statusId:t,checked:e}}function i(){return function(t,e){t(s()),Object(d.a)(e).post("/api/v1/reports",{account_id:e().getIn(["reports","new","account_id"]),status_ids:e().getIn(["reports","new","status_ids"]),comment:e().getIn(["reports","new","comment"]),forward:e().getIn(["reports","new","forward"])}).then(function(e){t(Object(h.c)()),t(a(e.data))}).catch(function(e){return t(c(e))})}}function s(){return{type:f}}function a(t){return{type:g,report:t}}function c(t){return{type:b,error:t}}function u(t){return{type:m,comment:t}}function l(t){return{type:y,forward:t}}e.c=o,e.e=r,e.d=i,e.a=u,e.b=l;var d=n(13),h=n(26),p="REPORT_INIT",f="REPORT_SUBMIT_REQUEST",g="REPORT_SUBMIT_SUCCESS",b="REPORT_SUBMIT_FAIL",v="REPORT_STATUS_TOGGLE",m="REPORT_COMMENT_CHANGE",y="REPORT_FORWARD_CHANGE"},288:function(t,e,n){"use strict";var o=n(2),r=n.n(o),i=n(0),s=(n.n(i),n(9)),a=n(152),c=n(67),u=n(18),l=n(68),d=n(22),h=n(91),p=n(283),f=n(287),g=n(26),b=n(6),v=n(12),m=(n(36),Object(b.f)({deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this status?"},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"}})),y=function(){var t=Object(c.e)();return function(e,n){return{status:t(e,n.id)}}},O=function(t,e){var n=e.intl;return{onReply:function(e,n){t(Object(u.T)(e,n))},onModalReblog:function(e){t(Object(l.l)(e))},onReblog:function(e,n){e.get("reblogged")?t(Object(l.n)(e)):n.shiftKey||!v.b?this.onModalReblog(e):t(Object(g.d)("BOOST",{status:e,onReblog:this.onModalReblog}))},onFavourite:function(e){t(e.get("favourited")?Object(l.m)(e):Object(l.i)(e))},onDelete:function(e){t(v.e?Object(g.d)("CONFIRM",{message:n.formatMessage(m.deleteMessage),confirm:n.formatMessage(m.deleteConfirm),onConfirm:function(){return t(Object(h.f)(e.get("id")))}}):Object(h.f)(e.get("id")))},onDirect:function(e,n){t(Object(u.N)(e,n))},onMention:function(e,n){t(Object(u.R)(e,n))},onOpenMedia:function(e,n){t(Object(g.d)("MEDIA",{media:e,index:n}))},onOpenVideo:function(e,n){t(Object(g.d)("VIDEO",{media:e,time:n}))},onBlock:function(e){t(Object(g.d)("CONFIRM",{message:r()(b.b,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:r()("strong",{},void 0,"@",e.get("acct"))}}),confirm:n.formatMessage(m.blockConfirm),onConfirm:function(){return t(Object(d.q)(e.get("id")))}}))},onReport:function(e){t(Object(f.c)(e.get("account"),e))},onMute:function(e){t(Object(p.c)(e))},onMuteConversation:function(e){t(e.get("muted")?Object(h.k)(e.get("id")):Object(h.i)(e.get("id")))},onToggleHidden:function(e){t(e.get("hidden")?Object(h.j)(e.get("id")):Object(h.h)(e.get("id")))}}};e.a=Object(b.g)(Object(s.connect)(y,O)(a.a))},289:function(t,e,n){"use strict";n.d(e,"a",function(){return T});var o,r,i=n(2),s=n.n(i),a=n(1),c=n.n(a),u=n(3),l=n.n(u),d=n(4),h=n.n(d),p=n(93),f=n.n(p),g=n(0),b=n.n(g),v=n(151),m=n(5),y=n.n(m),O=n(290),I=n(285),M=n(295),S=n(8),C=(n.n(S),n(10)),_=n.n(C),j=n(153),T=(r=o=function(t){function e(){var n,o,r;c()(this,e);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=l()(this,t.call.apply(t,[this].concat(s))),o.state={fullscreen:null},o.intersectionObserverWrapper=new M.a,o.handleScroll=f()(function(){if(o.node){var t=o.node,e=t.scrollTop;400>t.scrollHeight-e-t.clientHeight&&o.props.onLoadMore&&!o.props.isLoading&&o.props.onLoadMore(),e<100&&o.props.onScrollToTop?o.props.onScrollToTop():o.props.onScroll&&o.props.onScroll()}},150,{trailing:!0}),o.onFullScreenChange=function(){o.setState({fullscreen:Object(j.d)()})},o.setRef=function(t){o.node=t},o.handleLoadMore=function(t){t.preventDefault(),o.props.onLoadMore()},r=n,l()(o,r)}return h()(e,t),e.prototype.componentDidMount=function(){this.attachScrollListener(),this.attachIntersectionObserver(),Object(j.a)(this.onFullScreenChange),this.handleScroll()},e.prototype.getSnapshotBeforeUpdate=function(t){return b.a.Children.count(t.children)>0&&b.a.Children.count(t.children)<b.a.Children.count(this.props.children)&&this.getFirstChildKey(t)!==this.getFirstChildKey(this.props)&&this.node.scrollTop>0?this.node.scrollHeight-this.node.scrollTop:null},e.prototype.componentDidUpdate=function(t,e,n){if(null!==n){var o=this.node.scrollHeight-n;this.node.scrollTop!==o&&(this.node.scrollTop=o)}},e.prototype.componentWillUnmount=function(){this.detachScrollListener(),this.detachIntersectionObserver(),Object(j.b)(this.onFullScreenChange)},e.prototype.attachIntersectionObserver=function(){this.intersectionObserverWrapper.connect({root:this.node,rootMargin:"300% 0px"})},e.prototype.detachIntersectionObserver=function(){this.intersectionObserverWrapper.disconnect()},e.prototype.attachScrollListener=function(){this.node.addEventListener("scroll",this.handleScroll)},e.prototype.detachScrollListener=function(){this.node.removeEventListener("scroll",this.handleScroll)},e.prototype.getFirstChildKey=function(t){var e=t.children,n=e;return e instanceof S.List?n=e.get(0):Array.isArray(e)&&(n=e[0]),n&&n.key},e.prototype.render=function(){var t=this,e=this.props,n=e.children,o=e.scrollKey,r=e.trackScroll,i=e.shouldUpdateScroll,a=e.isLoading,c=e.hasMore,u=e.prepend,l=e.emptyMessage,d=e.onLoadMore,h=this.state.fullscreen,p=b.a.Children.count(n),f=c&&p>0&&d?s()(I.a,{visible:!a,onClick:this.handleLoadMore}):null,g=null;return g=a||p>0||!l?b.a.createElement("div",{className:_()("scrollable",{fullscreen:h}),ref:this.setRef},s()("div",{role:"feed",className:"item-list"},void 0,u,b.a.Children.map(this.props.children,function(e,n){return s()(O.a,{id:e.key,index:n,listLength:p,intersectionObserverWrapper:t.intersectionObserverWrapper,saveHeightKey:r?t.context.router.route.location.key+":"+o:null},e.key,e)}),f)):b.a.createElement("div",{className:"empty-column-indicator",ref:this.setRef},l),r?s()(v.a,{scrollKey:o,shouldUpdateScroll:i},void 0,g):g},e}(g.PureComponent),o.contextTypes={router:y.a.object},o.defaultProps={trackScroll:!0},r)},290:function(t,e,n){"use strict";var o=n(9),r=n(291),i=n(94),s=function(t,e){return{cachedHeight:t.getIn(["height_cache",e.saveHeightKey,e.id])}},a=function(t){return{onHeightChange:function(e,n,o){t(Object(i.d)(e,n,o))}}};e.a=Object(o.connect)(s,a)(r.a)},291:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var o=n(1),r=n.n(o),i=n(3),s=n.n(i),a=n(4),c=n.n(a),u=n(0),l=n.n(u),d=n(292),h=n(294),p=n(8),f=(n.n(p),["id","index","listLength"]),g=["id","index","listLength","cachedHeight"],b=function(t){function e(){var n,o,i;r()(this,e);for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return n=o=s()(this,t.call.apply(t,[this].concat(c))),o.state={isHidden:!1},o.handleIntersection=function(t){o.entry=t,Object(d.a)(o.calculateHeight),o.setState(o.updateStateAfterIntersection)},o.updateStateAfterIntersection=function(t){return t.isIntersecting&&!o.entry.isIntersecting&&Object(d.a)(o.hideIfNotIntersecting),{isIntersecting:o.entry.isIntersecting,isHidden:!1}},o.calculateHeight=function(){var t=o.props,e=t.onHeightChange,n=t.saveHeightKey,r=t.id;o.height=Object(h.a)(o.entry).height,e&&n&&e(n,r,o.height)},o.hideIfNotIntersecting=function(){o.componentMounted&&o.setState(function(t){return{isHidden:!t.isIntersecting}})},o.handleRef=function(t){o.node=t},i=n,s()(o,i)}return c()(e,t),e.prototype.shouldComponentUpdate=function(t,e){var n=this,o=!this.state.isIntersecting&&(this.state.isHidden||this.props.cachedHeight);return!!o!=!(e.isIntersecting||!e.isHidden&&!t.cachedHeight)||!(o?g:f).every(function(e){return Object(p.is)(t[e],n.props[e])})},e.prototype.componentDidMount=function(){var t=this.props,e=t.intersectionObserverWrapper,n=t.id;e.observe(n,this.node,this.handleIntersection),this.componentMounted=!0},e.prototype.componentWillUnmount=function(){var t=this.props,e=t.intersectionObserverWrapper,n=t.id;e.unobserve(n,this.node),this.componentMounted=!1},e.prototype.render=function(){var t=this.props,e=t.children,n=t.id,o=t.index,r=t.listLength,i=t.cachedHeight,s=this.state,a=s.isIntersecting,c=s.isHidden;return a||!c&&!i?l.a.createElement("article",{ref:this.handleRef,"aria-posinset":o,"aria-setsize":r,"data-id":n,tabIndex:"0"},e&&l.a.cloneElement(e,{hidden:!1})):l.a.createElement("article",{ref:this.handleRef,"aria-posinset":o,"aria-setsize":r,style:{height:(this.height||i)+"px",opacity:0,overflow:"hidden"},"data-id":n,tabIndex:"0"},e&&l.a.cloneElement(e,{hidden:!0}))},e}(l.a.Component)},292:function(t,e,n){"use strict";function o(t){for(;a.length&&t.timeRemaining()>0;)a.shift()();a.length?requestIdleCallback(o):c=!1}function r(t){a.push(t),c||(c=!0,requestIdleCallback(o))}var i=n(293),s=n.n(i),a=new s.a,c=!1;e.a=r},293:function(t,e,n){"use strict";function o(){this.length=0}o.prototype.push=function(t){var e={item:t};this.last?this.last=this.last.next=e:this.last=this.first=e,this.length++},o.prototype.shift=function(){var t=this.first;if(t)return this.first=t.next,--this.length||(this.last=void 0),t.item},o.prototype.slice=function(t,e){t=void 0===t?0:t,e=void 0===e?1/0:e;for(var n=[],o=0,r=this.first;r&&!(--e<0);r=r.next)++o>t&&n.push(r.item);return n},t.exports=o},294:function(t,e,n){"use strict";function o(t){if("boolean"!=typeof r){var e=t.target.getBoundingClientRect(),n=t.boundingClientRect;r=e.height!==n.height||e.top!==n.top||e.width!==n.width||e.bottom!==n.bottom||e.left!==n.left||e.right!==n.right}return r?t.target.getBoundingClientRect():t.boundingClientRect}var r=void 0;e.a=o},295:function(t,e,n){"use strict";var o=n(1),r=n.n(o),i=function(){function t(){r()(this,t),this.callbacks={},this.observerBacklog=[],this.observer=null}return t.prototype.connect=function(t){var e=this,n=function(t){t.forEach(function(t){var n=t.target.getAttribute("data-id");e.callbacks[n]&&e.callbacks[n](t)})};this.observer=new IntersectionObserver(n,t),this.observerBacklog.forEach(function(t){var n=t[0],o=t[1],r=t[2];e.observe(n,o,r)}),this.observerBacklog=null},t.prototype.observe=function(t,e,n){this.observer?(this.callbacks[t]=n,this.observer.observe(e)):this.observerBacklog.push([t,e,n])},t.prototype.unobserve=function(t,e){this.observer&&(delete this.callbacks[t],this.observer.unobserve(e))},t.prototype.disconnect=function(){this.observer&&(this.callbacks={},this.observer.disconnect(),this.observer=null)},t}();e.a=i},296:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var o,r=n(2),i=n.n(r),s=n(1),a=n.n(s),c=n(3),u=n.n(c),l=n(4),d=n.n(l),h=n(0),p=n.n(h),f=n(6),g=Object(f.f)({load_more:{id:"status.load_more",defaultMessage:"Load more"}}),b=Object(f.g)(o=function(t){function e(){var n,o,r;a()(this,e);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=o=u()(this,t.call.apply(t,[this].concat(s))),o.handleClick=function(){o.props.onClick(o.props.maxId)},r=n,u()(o,r)}return d()(e,t),e.prototype.render=function(){var t=this.props,e=t.disabled,n=t.intl;return i()("button",{className:"load-more load-gap",disabled:e,onClick:this.handleClick,"aria-label":n.formatMessage(g.load_more)},void 0,i()("i",{className:"fa fa-ellipsis-h"}))},e}(p.a.PureComponent))||o},297:function(t,e,n){"use strict";n.d(e,"a",function(){return L});var o,r,i=n(29),s=n.n(i),a=n(2),c=n.n(a),u=n(30),l=n.n(u),d=n(1),h=n.n(d),p=n(3),f=n.n(p),g=n(4),b=n.n(g),v=n(34),m=n.n(v),y=n(0),O=n.n(y),I=n(14),M=n.n(I),S=n(5),C=n.n(S),_=n(288),j=n(11),T=n.n(j),E=n(296),R=n(289),k=n(6),L=(r=o=function(t){function e(){var n,o,r;h()(this,e);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=f()(this,t.call.apply(t,[this].concat(s))),o.getFeaturedStatusCount=function(){return o.props.featuredStatusIds?o.props.featuredStatusIds.size:0},o.getCurrentStatusIndex=function(t,e){return e?o.props.featuredStatusIds.indexOf(t):o.props.statusIds.indexOf(t)+o.getFeaturedStatusCount()},o.handleMoveUp=function(t,e){var n=o.getCurrentStatusIndex(t,e)-1;o._selectChild(n)},o.handleMoveDown=function(t,e){var n=o.getCurrentStatusIndex(t,e)+1;o._selectChild(n)},o.handleLoadOlder=m()(function(){o.props.onLoadMore(o.props.statusIds.last())},300,{leading:!0}),o.setRef=function(t){o.node=t},r=n,f()(o,r)}return b()(e,t),e.prototype._selectChild=function(t){var e=this.node.node.querySelector("article:nth-of-type("+(t+1)+") .focusable");e&&e.focus()},e.prototype.render=function(){var t=this,e=this.props,n=e.statusIds,o=e.onLoadMore,r=l()(e,["statusIds","onLoadMore"]),i=r.isLoading;if(r.isPartial)return c()("div",{className:"regeneration-indicator"},void 0,c()("div",{},void 0,c()("div",{className:"regeneration-indicator__label"},void 0,c()(k.b,{id:"regeneration_indicator.label",tagName:"strong",defaultMessage:"Loading…"}),c()(k.b,{id:"regeneration_indicator.sublabel",defaultMessage:"Your home feed is being prepared!"}))));var a=i||n.size>0?n.map(function(e,r){return null===e?c()(E.a,{disabled:i,maxId:r>0?n.get(r-1):null,onClick:o},"gap:"+n.get(r+1)):c()(_.a,{id:e,onMoveUp:t.handleMoveUp,onMoveDown:t.handleMoveDown},e)}):null;return O.a.createElement(R.a,s()({},r,{onLoadMore:o&&this.handleLoadOlder,ref:this.setRef}),a)},e}(T.a),o.propTypes={scrollKey:C.a.string.isRequired,statusIds:M.a.list.isRequired,onLoadMore:C.a.func,onScrollToTop:C.a.func,onScroll:C.a.func,trackScroll:C.a.bool,shouldUpdateScroll:C.a.func,isLoading:C.a.bool,isPartial:C.a.bool,hasMore:C.a.bool,prepend:C.a.node,emptyMessage:C.a.node},o.defaultProps={trackScroll:!0},r)},817:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return C});var o,r,i=n(2),s=n.n(i),a=n(1),c=n.n(a),u=n(3),l=n.n(u),d=n(4),h=n.n(d),p=n(0),f=n.n(p),g=n(9),b=n(92),v=n(70),m=n(69),y=n(19),O=n(301),I=n(6),M=n(71),S=function(t,e){return{hasUnread:t.getIn(["timelines","hashtag:"+e.params.id,"unread"])>0}},C=(o=Object(g.connect)(S))(r=function(t){function e(){var n,o,r;c()(this,e);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=l()(this,t.call.apply(t,[this].concat(s))),o.handlePin=function(){var t=o.props,e=t.columnId,n=t.dispatch;n(e?Object(O.f)(e):Object(O.d)("HASHTAG",{id:o.props.params.id}))},o.handleMove=function(t){var e=o.props,n=e.columnId;(0,e.dispatch)(Object(O.e)(n,t))},o.handleHeaderClick=function(){o.column.scrollTop()},o.setRef=function(t){o.column=t},o.handleLoadMore=function(t){o.props.dispatch(Object(y.o)(o.props.params.id,{maxId:t}))},r=n,l()(o,r)}return h()(e,t),e.prototype._subscribe=function(t,e){this.disconnect=t(Object(M.c)(e))},e.prototype._unsubscribe=function(){this.disconnect&&(this.disconnect(),this.disconnect=null)},e.prototype.componentDidMount=function(){var t=this.props.dispatch,e=this.props.params.id;t(Object(y.o)(e)),this._subscribe(t,e)},e.prototype.componentWillReceiveProps=function(t){t.params.id!==this.props.params.id&&(this.props.dispatch(Object(y.o)(t.params.id)),this._unsubscribe(),this._subscribe(this.props.dispatch,t.params.id))},e.prototype.componentWillUnmount=function(){this._unsubscribe()},e.prototype.render=function(){var t=this.props,e=t.hasUnread,n=t.columnId,o=t.multiColumn,r=this.props.params.id,i=!!n;return f.a.createElement(v.a,{ref:this.setRef},s()(m.a,{icon:"hashtag",active:e,title:r,onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:i,multiColumn:o,showBackButton:!0}),s()(b.a,{trackScroll:!i,scrollKey:"hashtag_timeline-"+n,timelineId:"hashtag:"+r,onLoadMore:this.handleLoadMore,emptyMessage:s()(I.b,{id:"empty_column.hashtag",defaultMessage:"There is nothing in this hashtag yet."})}))},e}(f.a.PureComponent))||r},92:function(t,e,n){"use strict";var o=n(34),r=n.n(o),i=n(9),s=n(297),a=n(19),c=n(8),u=(n.n(c),n(95)),l=(n.n(u),n(12)),d=function(){return Object(u.createSelector)([function(t,e){var n=e.type;return t.getIn(["settings",n],Object(c.Map)())},function(t,e){var n=e.type;return t.getIn(["timelines",n,"items"],Object(c.List)())},function(t){return t.get("statuses")}],function(t,e,n){var o=t.getIn(["regex","body"],"").trim(),r=null;try{r=o&&new RegExp(o,"i")}catch(t){}return e.filter(function(e){var o=n.get(e),i=!0;if(!1===t.getIn(["shows","reblog"])&&(i=i&&null===o.get("reblog")),!1===t.getIn(["shows","reply"])&&(i=i&&(null===o.get("in_reply_to_id")||o.get("in_reply_to_account_id")===l.g)),i&&r&&o.get("account")!==l.g){var s=o.get("reblog")?n.getIn([o.get("reblog"),"search_index"]):o.get("search_index");i=!r.test(s)}return i})})},h=function(){var t=d();return function(e,n){var o=n.timelineId;return{statusIds:t(e,{type:o}),isLoading:e.getIn(["timelines",o,"isLoading"],!0),isPartial:e.getIn(["timelines",o,"isPartial"],!1),hasMore:e.getIn(["timelines",o,"hasMore"])}}},p=function(t,e){var n=e.timelineId;return{onScrollToTop:r()(function(){t(Object(a.s)(n,!0))},100),onScroll:r()(function(){t(Object(a.s)(n,!1))},100)}};e.a=Object(i.connect)(h,p)(s.a)}});
//# sourceMappingURL=hashtag_timeline.js.map