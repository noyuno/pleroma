webpackJsonp([26],{155:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"default",function(){return P});var a,n,s,o=i(2),r=i.n(o),l=i(1),c=i.n(l),d=i(3),u=i.n(d),p=i(4),g=i.n(p),v=i(0),h=i.n(v),m=i(5),f=i.n(m),b=i(8),y=(i.n(b),i(6)),k=i(35),_=i(12),C=Object(y.f)({hidden:{id:"status.media_hidden",defaultMessage:"Media hidden"},sensitive:{id:"media_gallery.sensitive",defaultMessage:"Sensitive"},toggle:{id:"status.sensitive_toggle",defaultMessage:"Click to view"},toggle_visible:{id:"media_gallery.toggle_visible",defaultMessage:"Toggle visibility"},warning:{id:"status.sensitive_warning",defaultMessage:"Sensitive content"}}),M=(n=a=function(e){function t(){var i,a,n;c()(this,t);for(var s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=a=u()(this,e.call.apply(e,[this].concat(o))),a.handleMouseEnter=function(e){a.hoverToPlay()&&e.target.play()},a.handleMouseLeave=function(e){a.hoverToPlay()&&(e.target.pause(),e.target.currentTime=0)},a.handleClick=function(e){var t=a.props,i=t.index,n=t.onClick;a.context.router&&0===e.button&&(e.preventDefault(),n(i)),e.stopPropagation()},n=i,u()(a,n)}return g()(t,e),t.prototype.hoverToPlay=function(){var e=this.props.attachment;return!_.a&&"gifv"===e.get("type")},t.prototype.render=function(){var e=this.props.attachment,t="";if("image"===e.get("type")){var i=e.getIn(["meta","focus","x"])||0,a=e.getIn(["meta","focus","y"])||0,n=100*(i/2+.5),s=100*(a/-2+.5);t=r()("a",{className:"attachement",href:e.get("remote_url")||e.get("url"),onClick:this.handleClick,target:"_blank"},void 0,r()("img",{src:e.get("url"),alt:e.get("description"),title:e.get("description"),style:{objectPosition:n+"% "+s+"%"}}))}else if("audio"===e.get("type"))t=r()("audio",{className:"attachement","aria-label":e.get("description"),role:"application",src:e.get("url"),loop:!0,controls:!0});else if("gifv"===e.get("type")){var o=!Object(k.a)()&&_.a;t=r()("video",{className:"attachement","aria-label":e.get("description"),role:"application",src:e.get("url"),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,autoPlay:o,loop:!0,muted:!0})}return t},t}(h.a.PureComponent),a.contextTypes={router:f.a.object},a.defaultProps={index:0},n),P=Object(y.g)(s=function(e){function t(){var i,a,n;c()(this,t);for(var s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=a=u()(this,e.call.apply(e,[this].concat(o))),a.state={visible:!a.props.sensitive||_.f},a.handleOpen=function(){a.setState({visible:!a.state.visible})},a.handleClick=function(e){a.props.onOpenMedia(a.props.media,e)},n=i,u()(a,n)}return g()(t,e),t.prototype.componentWillReceiveProps=function(e){Object(b.is)(e.media,this.props.media)||this.setState({visible:!e.sensitive})},t.prototype.render=function(){var e=this.handleClick,t=this.handleOpen,i=this.props,a=i.intl,n=i.media,s=i.sensitive,o=this.state.visible,l=r()("button",{className:"icon-button overlayed sensitive-info",onClick:t,title:a.formatMessage(C.toggle_visible)},void 0,"👁",s?r()("span",{className:"sensitive-marker"},void 0,h.a.createElement(y.b,C.sensitive)):null),c=r()("button",{className:"media-spoiler",onClick:t},void 0,r()("span",{className:"media-spoiler__warning"},void 0,h.a.createElement(y.b,s?C.warning:C.hidden)),r()("span",{className:"media-spoiler__trigger"},void 0,h.a.createElement(y.b,C.toggle))),d="media_error";switch(n.lenght){case 0:break;case 1:d=r()(M,{attachment:n.get(0),onClick:e});break;default:d=n.map(function(t,i){return r()(M,{attachment:t,index:i,onClick:e},t.get("id"))})}return o?r()("div",{className:"media-gallery"},void 0,l," ",d):r()("div",{className:"media-gallery"},void 0,c)},t}(h.a.PureComponent))||s}});
//# sourceMappingURL=media_gallery.js.map